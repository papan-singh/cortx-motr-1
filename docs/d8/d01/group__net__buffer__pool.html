<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: Network Buffer Pool</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d8/d01/group__net__buffer__pool.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Network Buffer Pool<div class="ingroups"><a class="el" href="../../d9/dd2/group__net.html">Networking</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Network buffer pool allocates and manages a pool of network buffers. Users request a buffer from the pool and after its usage is over gives back to the pool.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Network Buffer Pool:</div>
<div class="dyncontent">
<center><table><tr><td><img src="../../d8/d01/group__net__buffer__pool.png" border="0" alt="" usemap="#d8_2d01_2group____net____buffer____pool"/>
<map name="d8_2d01_2group____net____buffer____pool" id="d8_2d01_2group____net____buffer____pool">
<area shape="rect" id="node1" href="../../d9/dd2/group__net.html" title="The networking module provides an asynchronous, event&#45;based message passing service, with support for asynchronous bulk data transfer (if used with an RDMA capable transport). " alt="" coords="5,5,103,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7d/structm0__net__buffer__pool__ops.html">m0_net_buffer_pool_ops</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaff0a3b1f6b4b74365e6016c44095ed31"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="../../d8/d01/group__net__buffer__pool.html#ggaff0a3b1f6b4b74365e6016c44095ed31a4e9a5af6d86cfebd346b130ccb8b91c8">M0_BUFFER_ANY_COLOUR</a> = ~0, 
<a class="el" href="../../d8/d01/group__net__buffer__pool.html#ggaff0a3b1f6b4b74365e6016c44095ed31ade56d0c5f0f60bd9306704d912cbb310">M0_NET_BUFFER_POOL_THRESHOLD</a> = 2
 }</td></tr>
<tr class="separator:gaff0a3b1f6b4b74365e6016c44095ed31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacc0997e38f0166aaa871bb8dec7e5ba0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#gacc0997e38f0166aaa871bb8dec7e5ba0">M0_TL_DESCR_DEFINE</a> (m0_net_pool, &quot;net_buffer_pool&quot;, M0_INTERNAL, struct <a class="el" href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a>, nb_lru, nb_magic, <a class="el" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a3eba6d2b37bf147c62a017ff0d327fac">M0_NET_BUFFER_LINK_MAGIC</a>, <a class="el" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a37c0ec0d9212282ff59eac153c3a6bf7">M0_NET_BUFFER_HEAD_MAGIC</a>)</td></tr>
<tr class="separator:gacc0997e38f0166aaa871bb8dec7e5ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09a32c80736a89ad4cbe44b192663fb3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#ga09a32c80736a89ad4cbe44b192663fb3">M0_TL_DEFINE</a> (m0_net_pool, M0_INTERNAL, struct <a class="el" href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a>)</td></tr>
<tr class="separator:ga09a32c80736a89ad4cbe44b192663fb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d15c8fbe233ea612aa943c6d4c5d0f0"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#ga1d15c8fbe233ea612aa943c6d4c5d0f0">pool_colour_check</a> (const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>)</td></tr>
<tr class="separator:ga1d15c8fbe233ea612aa943c6d4c5d0f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab271958565699ec3b9b3cb533d37a947"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#gab271958565699ec3b9b3cb533d37a947">pool_lru_buffer_check</a> (const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>)</td></tr>
<tr class="separator:gab271958565699ec3b9b3cb533d37a947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b695b0d2fb493f78da0f66f8d4430c0"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#ga8b695b0d2fb493f78da0f66f8d4430c0">colour_is_valid</a> (const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>, uint32_t colour)</td></tr>
<tr class="separator:ga8b695b0d2fb493f78da0f66f8d4430c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa49f3dade06b0e05f6ea7df746aab950"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#gaa49f3dade06b0e05f6ea7df746aab950">m0_net_buffer_pool_invariant</a> (const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>)</td></tr>
<tr class="separator:gaa49f3dade06b0e05f6ea7df746aab950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b0333974657828e5a5db987af42d72a"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#ga1b0333974657828e5a5db987af42d72a">m0_net_buffer_pool_init</a> (struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>, struct <a class="el" href="../../db/d78/structm0__net__domain.html">m0_net_domain</a> *ndom, uint32_t threshold, uint32_t <a class="el" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#a5363cfa511d9bdac419ffab45c10bd85">seg_nr</a>, <a class="el" href="../../d9/d49/types_8h.html#a754ca36f0e1fff3edef4f267024b1a1f">m0_bcount_t</a> <a class="el" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#a1d09a0ee373f1ed411fc884412d8ea4b">seg_size</a>, uint32_t colours, unsigned shift, bool dont_dump)</td></tr>
<tr class="separator:ga1b0333974657828e5a5db987af42d72a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga687784ed53bf1d4d1d4b7c272106d8f6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#ga687784ed53bf1d4d1d4b7c272106d8f6">net_buffer_pool_grow</a> (struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>)</td></tr>
<tr class="separator:ga687784ed53bf1d4d1d4b7c272106d8f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf903917ab63aa4d49b3944a4b491992c"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#gaf903917ab63aa4d49b3944a4b491992c">m0_net_buffer_pool_provision</a> (struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>, uint32_t buf_nr)</td></tr>
<tr class="separator:gaf903917ab63aa4d49b3944a4b491992c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacee3366ac3ea4c57c35ec88b263a3159"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#gacee3366ac3ea4c57c35ec88b263a3159">buffer_remove</a> (struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>, struct <a class="el" href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a> *nb)</td></tr>
<tr class="separator:gacee3366ac3ea4c57c35ec88b263a3159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6a3e7055ae94f1e50574dc7c8816c284"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#ga6a3e7055ae94f1e50574dc7c8816c284">m0_net_buffer_pool_fini</a> (struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>)</td></tr>
<tr class="separator:ga6a3e7055ae94f1e50574dc7c8816c284"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3108150c6181b9767449f3b2eb0c0f7c"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#ga3108150c6181b9767449f3b2eb0c0f7c">m0_net_buffer_pool_lock</a> (struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>)</td></tr>
<tr class="separator:ga3108150c6181b9767449f3b2eb0c0f7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5891449a008a0d2a5fcad686b2f2e63e"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#ga5891449a008a0d2a5fcad686b2f2e63e">m0_net_buffer_pool_is_locked</a> (const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>)</td></tr>
<tr class="separator:ga5891449a008a0d2a5fcad686b2f2e63e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1de02828dec622bfbd4b17cfa87e3115"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#ga1de02828dec622bfbd4b17cfa87e3115">m0_net_buffer_pool_is_not_locked</a> (const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>)</td></tr>
<tr class="separator:ga1de02828dec622bfbd4b17cfa87e3115"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98cfb317097d1024cca11a4c5af51b9c"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#ga98cfb317097d1024cca11a4c5af51b9c">m0_net_buffer_pool_unlock</a> (struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>)</td></tr>
<tr class="separator:ga98cfb317097d1024cca11a4c5af51b9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6bdd9900fc54c802b1e16d44cb6b64f"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL struct <a class="el" href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#gac6bdd9900fc54c802b1e16d44cb6b64f">m0_net_buffer_pool_get</a> (struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>, uint32_t colour)</td></tr>
<tr class="separator:gac6bdd9900fc54c802b1e16d44cb6b64f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacaa1314b4436697faf45f84463ba14f5"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#gacaa1314b4436697faf45f84463ba14f5">m0_net_buffer_pool_put</a> (struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>, struct <a class="el" href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a> *<a class="el" href="../../d9/dd0/structbuf.html">buf</a>, uint32_t colour)</td></tr>
<tr class="separator:gacaa1314b4436697faf45f84463ba14f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3bf9b14c32877d0d93dd44c2143b60a3"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d01/group__net__buffer__pool.html#ga3bf9b14c32877d0d93dd44c2143b60a3">m0_net_buffer_pool_prune</a> (struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="el" href="../../d4/d6a/test__pm_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>)</td></tr>
<tr class="separator:ga3bf9b14c32877d0d93dd44c2143b60a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Network buffer pool allocates and manages a pool of network buffers. Users request a buffer from the pool and after its usage is over gives back to the pool. </p>
<p>It provides support for a pool of network buffers involving no higher level interfaces than the network module itself. It is associated with a single network domain. Non-blocking interfaces are available to get and put network buffers. Call-backs are provided to announce when the pool is non-empty or low on free buffers.</p>
<p>Upon receiving the not_empty call back user can put back buffers which are not in use into the pool.</p>
<p>The "coloured" variant of the get operation is done by returning the most recently used buffer that is associated with a specific colour (transfer machine), or if none such are found, the least recently used buffer from the pool, if any.</p>
<p>Pool is protected by a lock, to get or put a buffer into the pool user must acquire the lock and release the lock once its usage is over.</p>
<p>To finalize the pool all the buffers must be returned back to the pool (i.e number of free buffers must be equal to the total number of buffers).</p>
<p>To describe a typical buffer pool usage pattern, suppose that one wants a buffer pool of 10, size of each segment is 1024, number of segments is 64 and threshold is 10.</p>
<p>First, user needs to provide <a class="el" href="../../d9/d7d/structm0__net__buffer__pool__ops.html">m0_net_buffer_pool_ops</a>: </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="../../d9/d7d/structm0__net__buffer__pool__ops.html">m0_net_buffer_pool_ops</a> <a class="code" href="../../d7/dfe/buffer__pool__ut_8c.html#a3b134bb000e443ea2cf90c13d3e02c03">b_ops</a> = {</div><div class="line"> .<a class="code" href="../../d9/d7d/structm0__net__buffer__pool__ops.html#a05716d7f7b547ff5c0dfe5271822ecdb">nbpo_not_empty</a>       = <a class="code" href="../../d7/dfe/buffer__pool__ut_8c.html#a8713b457489bb4c7aa5badb650f23298">notempty</a>,</div><div class="line"> .nbpo_below_threshold = <a class="code" href="../../d7/dfe/buffer__pool__ut_8c.html#a0c00540bb68d803bb2630f37bf3cdb0e">low</a>,</div><div class="line">};</div></div><!-- fragment --><ul>
<li>Then, buffer pool needs to be assigned to a network domain and initialized with above values: <div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> <a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>;</div><div class="line"><span class="keyword">struct </span><a class="code" href="../../d5/da0/structm0__net__xprt.html">m0_net_xprt</a> *<a class="code" href="../../dc/de2/net_2module_8c.html#a1435da8b61a16e2cfe821bca92347237">xprt</a>;</div><div class="line">...</div><div class="line">bp.nbp_ops = &amp;<a class="code" href="../../d7/dfe/buffer__pool__ut_8c.html#a3b134bb000e443ea2cf90c13d3e02c03">b_ops</a>;</div><div class="line"><a class="code" href="../../d7/db8/cm_2repreb_2trigger__fop_8h.html#ac6509c6fe4cbf7bde170597172f8a288">rc</a> = <a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga1b0333974657828e5a5db987af42d72a">m0_net_buffer_pool_init</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>, <a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>.nbp_ndom, 10, 64, 4096, 10, ...);</div><div class="line">...</div></div><!-- fragment --></li>
<li>Now, to add buffers into the pool need to acquire the lock and then specify the number of buffers to be added: <div class="fragment"><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga3108150c6181b9767449f3b2eb0c0f7c">m0_net_buffer_pool_lock</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#gaf903917ab63aa4d49b3944a4b491992c">m0_net_buffer_pool_provision</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>, 10);</div><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga98cfb317097d1024cca11a4c5af51b9c">m0_net_buffer_pool_unlock</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div></div><!-- fragment --><ul>
<li>To add a buffer in the pool: <div class="fragment"><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga3108150c6181b9767449f3b2eb0c0f7c">m0_net_buffer_pool_lock</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#gaf903917ab63aa4d49b3944a4b491992c">m0_net_buffer_pool_provision</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>, 1);</div><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga98cfb317097d1024cca11a4c5af51b9c">m0_net_buffer_pool_unlock</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div></div><!-- fragment --></li>
<li>To get a buffer from the pool: To use any colour for the buffer variable colour should be M0_BUFFER_ANY_COLOUR. <div class="fragment"><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga3108150c6181b9767449f3b2eb0c0f7c">m0_net_buffer_pool_lock</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div><div class="line">nb = <a class="code" href="../../d8/d01/group__net__buffer__pool.html#gac6bdd9900fc54c802b1e16d44cb6b64f">m0_net_buffer_pool_get</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>, colour);</div><div class="line"><span class="keywordflow">if</span> (nb != <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"> <span class="stringliteral">&quot;Use the buffer&quot;</span></div><div class="line"><span class="keywordflow">else</span></div><div class="line"> <span class="stringliteral">&quot;goto sleep until buffer is available&quot;</span></div><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga98cfb317097d1024cca11a4c5af51b9c">m0_net_buffer_pool_unlock</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div></div><!-- fragment --></li>
</ul>
</li>
<li><p class="startli">To put back the buffer in the pool: To use any colour for the buffer variable colour should be M0_BUFFER_ANY_COLOUR. </p><div class="fragment"><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga3108150c6181b9767449f3b2eb0c0f7c">m0_net_buffer_pool_lock</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#gacaa1314b4436697faf45f84463ba14f5">m0_net_buffer_pool_put</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>, nb, colour);</div><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga98cfb317097d1024cca11a4c5af51b9c">m0_net_buffer_pool_unlock</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div></div><!-- fragment --><ul>
<li>To remove a buffer from the pool: <div class="fragment"><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga3108150c6181b9767449f3b2eb0c0f7c">m0_net_buffer_pool_lock</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga3bf9b14c32877d0d93dd44c2143b60a3">m0_net_buffer_pool_prune</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga98cfb317097d1024cca11a4c5af51b9c">m0_net_buffer_pool_unlock</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div></div><!-- fragment --></li>
<li>To finalize the pool: <div class="fragment"><div class="line"><a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga6a3e7055ae94f1e50574dc7c8816c284">m0_net_buffer_pool_fini</a>(&amp;<a class="code" href="../../db/d53/bulkio__ut_8c.html#ac4183caa9c7c0d2d5dda5323d2bed935">bp</a>);</div></div><!-- fragment --></li>
</ul>
<dl class="section see"><dt>See also</dt><dd>Also see <a class="el" href="../../d9/dd2/group__net.html#ga711c501232bfbf09dcf4c9607e62b4c7">m0_net_tm_pool_attach()</a> and <a class="el" href="../../d1/d77/_net_r_q_prov_d_l_d.html">Auo-Provisioning of Receive Message Queue Buffers</a>. </dd></dl>
</li>
</ul>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gaff0a3b1f6b4b74365e6016c44095ed31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaff0a3b1f6b4b74365e6016c44095ed31">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaff0a3b1f6b4b74365e6016c44095ed31a4e9a5af6d86cfebd346b130ccb8b91c8"></a>M0_BUFFER_ANY_COLOUR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ggaff0a3b1f6b4b74365e6016c44095ed31ade56d0c5f0f60bd9306704d912cbb310"></a>M0_NET_BUFFER_POOL_THRESHOLD&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d2/d03/buffer__pool_8h_source.html#l00140">140</a> of file <a class="el" href="../../d2/d03/buffer__pool_8h_source.html">buffer_pool.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gacee3366ac3ea4c57c35ec88b263a3159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacee3366ac3ea4c57c35ec88b263a3159">&#9670;&nbsp;</a></span>buffer_remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void buffer_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a> *&#160;</td>
          <td class="paramname"><em>nb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>It removes the given buffer from the pool </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00141">141</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_gacee3366ac3ea4c57c35ec88b263a3159_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_gacee3366ac3ea4c57c35ec88b263a3159_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_gacee3366ac3ea4c57c35ec88b263a3159_cgraph" id="d8/d01/group__net__buffer__pool_gacee3366ac3ea4c57c35ec88b263a3159_cgraph">
<area shape="rect" id="node2" href="../../d9/dd2/group__net.html#ga7d32f0da403ee9a79c5c49a6efa90da3" title="m0_net_buffer_deregister" alt="" coords="171,5,360,32"/>
<area shape="rect" id="node3" href="../../d0/d7f/group__vec.html#ga95f9e28738990276e914082ede456ea5" title="m0_bufvec_free_aligned\l_packed" alt="" coords="174,57,357,98"/>
<area shape="rect" id="node4" href="../../d7/ded/group__memory.html#ga0b8533a3024754008602759e71337eb3" title="m0_free" alt="" coords="227,123,303,149"/>
<area shape="rect" id="node5" href="../../d8/d01/group__net__buffer__pool.html#gaa49f3dade06b0e05f6ea7df746aab950" title="m0_net_buffer_pool\l_invariant" alt="" coords="190,174,341,215"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_gacee3366ac3ea4c57c35ec88b263a3159_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_gacee3366ac3ea4c57c35ec88b263a3159_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_gacee3366ac3ea4c57c35ec88b263a3159_icgraph" id="d8/d01/group__net__buffer__pool_gacee3366ac3ea4c57c35ec88b263a3159_icgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#ga6a3e7055ae94f1e50574dc7c8816c284" title="m0_net_buffer_pool_fini" alt="" coords="171,5,349,32"/>
<area shape="rect" id="node3" href="../../d8/d01/group__net__buffer__pool.html#ga3bf9b14c32877d0d93dd44c2143b60a3" title="m0_net_buffer_pool\l_prune" alt="" coords="185,57,335,98"/>
</map>
</div>

</div>
</div>
<a id="ga8b695b0d2fb493f78da0f66f8d4430c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b695b0d2fb493f78da0f66f8d4430c0">&#9670;&nbsp;</a></span>colour_is_valid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool colour_is_valid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>colour</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00208">208</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga8b695b0d2fb493f78da0f66f8d4430c0_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga8b695b0d2fb493f78da0f66f8d4430c0_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga8b695b0d2fb493f78da0f66f8d4430c0_icgraph" id="d8/d01/group__net__buffer__pool_ga8b695b0d2fb493f78da0f66f8d4430c0_icgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#gac6bdd9900fc54c802b1e16d44cb6b64f" title="m0_net_buffer_pool_get" alt="" coords="172,5,351,32"/>
<area shape="rect" id="node3" href="../../d8/d01/group__net__buffer__pool.html#gacaa1314b4436697faf45f84463ba14f5" title="m0_net_buffer_pool_put" alt="" coords="172,56,351,83"/>
</map>
</div>

</div>
</div>
<a id="ga6a3e7055ae94f1e50574dc7c8816c284"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6a3e7055ae94f1e50574dc7c8816c284">&#9670;&nbsp;</a></span>m0_net_buffer_pool_fini()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_net_buffer_pool_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finalizes a buffer pool. </p><dl class="section pre"><dt>Precondition</dt><dd>m0_net_buffer_pool_is_not_locked(pool) </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00154">154</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga6a3e7055ae94f1e50574dc7c8816c284_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga6a3e7055ae94f1e50574dc7c8816c284_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga6a3e7055ae94f1e50574dc7c8816c284_cgraph" id="d8/d01/group__net__buffer__pool_ga6a3e7055ae94f1e50574dc7c8816c284_cgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#ga1de02828dec622bfbd4b17cfa87e3115" title="m0_net_buffer_pool\l_is_not_locked" alt="" coords="249,5,400,47"/>
<area shape="rect" id="node3" href="../../d8/d01/group__net__buffer__pool.html#ga3108150c6181b9767449f3b2eb0c0f7c" title="m0_net_buffer_pool_lock" alt="" coords="232,71,417,98"/>
<area shape="rect" id="node4" href="../../d8/d01/group__net__buffer__pool.html#gaa49f3dade06b0e05f6ea7df746aab950" title="m0_net_buffer_pool\l_invariant" alt="" coords="465,125,616,167"/>
<area shape="rect" id="node5" href="../../d8/d01/group__net__buffer__pool.html#gacee3366ac3ea4c57c35ec88b263a3159" title="buffer_remove" alt="" coords="266,173,383,199"/>
<area shape="rect" id="node6" href="../../d7/ded/group__memory.html#ga0b8533a3024754008602759e71337eb3" title="m0_free" alt="" coords="503,202,579,229"/>
<area shape="rect" id="node7" href="../../d8/d01/group__net__buffer__pool.html#ga98cfb317097d1024cca11a4c5af51b9c" title="m0_net_buffer_pool\l_unlock" alt="" coords="249,275,400,316"/>
<area shape="rect" id="node8" href="../../d0/d04/group__mutex.html#ga3343af66e17b74ebf3f77fa6a31201c4" title="m0_mutex_fini" alt="" coords="265,341,384,367"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga6a3e7055ae94f1e50574dc7c8816c284_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga6a3e7055ae94f1e50574dc7c8816c284_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga6a3e7055ae94f1e50574dc7c8816c284_icgraph" id="d8/d01/group__net__buffer__pool_ga6a3e7055ae94f1e50574dc7c8816c284_icgraph">
<area shape="rect" id="node2" href="../../d7/daf/group___s_n_s_c_m.html#ga21cec19aa494a42c7c1227e4489b66b2" title="m0_sns_cm_setup" alt="" coords="259,5,402,32"/>
<area shape="rect" id="node3" href="../../d7/daf/group___s_n_s_c_m.html#ga8ba62c5993632c9163494d9ca91b637c" title="m0_sns_cm_fini" alt="" coords="267,56,394,83"/>
<area shape="rect" id="node4" href="../../d3/d94/group___d_l_d__bulk__server__fspec__ios__operations.html#ga9bfc314511ba60e341f0740c2c56c9eb" title="m0_ios_create_buffer_pool" alt="" coords="232,107,429,133"/>
<area shape="rect" id="node5" href="../../d3/d94/group___d_l_d__bulk__server__fspec__ios__operations.html#ga3c656a3c41e36e12fedd4b8d6a5adcda" title="m0_ios_delete_buffer_pool" alt="" coords="232,157,429,184"/>
<area shape="rect" id="node6" href="../../df/dca/group__m0d.html#ga3a5e22331699c1e4638efae69e64b467" title="cs_buffer_pool_fini" alt="" coords="259,208,402,235"/>
<area shape="rect" id="node7" href="../../d7/dfe/buffer__pool__ut_8c.html#accd2b6e71712d5b3683c70754cdd6722" title="test_fini" alt="" coords="293,259,368,285"/>
<area shape="rect" id="node8" href="../../d3/d8c/tm__provision__ut_8c.html#aa062adb23a2556f9eb61a768311e5e64" title="test_net_tm_prov" alt="" coords="263,309,399,336"/>
<area shape="rect" id="node9" href="../../db/de9/group__rpc.html#gacf2682f75faa756e5834ce6b7e17d164" title="m0_rpc_net_buffer_pool\l_setup" alt="" coords="241,361,420,402"/>
<area shape="rect" id="node10" href="../../db/de9/group__rpc.html#ga48860be7f6278837ffe38b1420c4fc7e" title="m0_rpc_net_buffer_pool\l_cleanup" alt="" coords="241,426,420,467"/>
</map>
</div>

</div>
</div>
<a id="gac6bdd9900fc54c802b1e16d44cb6b64f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6bdd9900fc54c802b1e16d44cb6b64f">&#9670;&nbsp;</a></span>m0_net_buffer_pool_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL struct <a class="el" href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a> * m0_net_buffer_pool_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>colour</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets a buffer from the pool. If the colour is specified (i.e non zero) and the corresponding coloured list is not empty then the buffer is taken from the head of this list. Otherwise the buffer is taken from the head of the per buffer pool list. </p><dl class="section pre"><dt>Precondition</dt><dd>m0_net_buffer_pool_is_locked(pool) </dd>
<dd>
colour == M0_BUFFER_ANY_COLOUR || colour &lt; pool-&gt;nbp_colours_nr </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>ergo(result != NULL, result-&gt;nb_flags &amp; M0_NET_BUF_REGISTERED) </dd>
<dd>
ergo(result != NULL, result-&gt;nb_pool == pool) </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00215">215</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_gac6bdd9900fc54c802b1e16d44cb6b64f_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_gac6bdd9900fc54c802b1e16d44cb6b64f_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_gac6bdd9900fc54c802b1e16d44cb6b64f_cgraph" id="d8/d01/group__net__buffer__pool_gac6bdd9900fc54c802b1e16d44cb6b64f_cgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#gaa49f3dade06b0e05f6ea7df746aab950" title="m0_net_buffer_pool\l_invariant" alt="" coords="232,5,383,47"/>
<area shape="rect" id="node3" href="../../d8/d01/group__net__buffer__pool.html#ga8b695b0d2fb493f78da0f66f8d4430c0" title="colour_is_valid" alt="" coords="248,71,367,98"/>
<area shape="rect" id="node4" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="263,122,351,149"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_gac6bdd9900fc54c802b1e16d44cb6b64f_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_gac6bdd9900fc54c802b1e16d44cb6b64f_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_gac6bdd9900fc54c802b1e16d44cb6b64f_icgraph" id="d8/d01/group__net__buffer__pool_gac6bdd9900fc54c802b1e16d44cb6b64f_icgraph">
<area shape="rect" id="node2" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#afcbd44181c1ea62dbb45b274fe7e76f5" title="test_cp_send_mismatch\l_epoch" alt="" coords="242,5,421,47"/>
<area shape="rect" id="node3" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#adaa2b7376b4bc7d156db0e8ad443eddb" title="test_cp_send_recv_verify" alt="" coords="238,71,425,98"/>
<area shape="rect" id="node4" href="../../d0/da4/group___c_m.html#gaa8c14adc06d2f27b7c0f5ec2e97ccda5" title="m0_cm_buffer_get" alt="" coords="260,122,403,149"/>
<area shape="rect" id="node5" href="../../d9/dc2/group__io__foms.html#ga20ae6ec9dfefec8f5eb40e1f8070ee01" title="net_buffer_acquire" alt="" coords="260,173,403,199"/>
<area shape="rect" id="node6" href="../../db/d53/bulkio__ut_8c.html#a0c0021e0d4d5c63dea4e5c613817a5dd" title="empty_buffers_pool" alt="" coords="256,223,407,250"/>
<area shape="rect" id="node7" href="../../d0/d50/group__net__pvt.html#ga10b81fec0a61efae5b970c93c8166031" title="m0_net__tm_provision_buf" alt="" coords="232,274,431,301"/>
<area shape="rect" id="node8" href="../../d7/dfe/buffer__pool__ut_8c.html#a7e397b420ebcaba12c8ae7c0ec57b7a7" title="test_get_put" alt="" coords="280,325,383,351"/>
<area shape="rect" id="node9" href="../../d7/dfe/buffer__pool__ut_8c.html#a056d8fcec335c87e78165d32f4d1567e" title="test_get_put_colour" alt="" coords="256,375,407,402"/>
<area shape="rect" id="node10" href="../../d7/dfe/buffer__pool__ut_8c.html#ac94f759827073e859d915c4077a01439" title="buffers_get_put" alt="" coords="270,426,393,453"/>
</map>
</div>

</div>
</div>
<a id="ga1b0333974657828e5a5db987af42d72a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b0333974657828e5a5db987af42d72a">&#9670;&nbsp;</a></span>m0_net_buffer_pool_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL int m0_net_buffer_pool_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d78/structm0__net__domain.html">m0_net_domain</a> *&#160;</td>
          <td class="paramname"><em>ndom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>seg_nr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d49/types_8h.html#a754ca36f0e1fff3edef4f267024b1a1f">m0_bcount_t</a>&#160;</td>
          <td class="paramname"><em>seg_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>colours</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>shift</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dont_dump</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes fields of a buffer pool and tlist, which are used to populate the pool using <a class="el" href="../../d8/d01/group__net__buffer__pool.html#gaf903917ab63aa4d49b3944a4b491992c">m0_net_buffer_pool_provision()</a>. </p><dl class="section pre"><dt>Precondition</dt><dd>ndom != NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Pool to initialize. </td></tr>
    <tr><td class="paramname">ndom</td><td>Network domain to associate with the pool. </td></tr>
    <tr><td class="paramname">threshold</td><td>Number of buffer below which to notify the user. </td></tr>
    <tr><td class="paramname">seg_nr</td><td>Number of segments in each buffer. </td></tr>
    <tr><td class="paramname">colours</td><td>Number of colours in the pool. </td></tr>
    <tr><td class="paramname">seg_size</td><td>Size of each segment in a buffer. </td></tr>
    <tr><td class="paramname">shift</td><td>Alignment needed for network buffers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>seg_nr &lt;= m0_net_domain_get_max_buffer_segments(ndom) &amp;&amp; seg_size &lt;= m0_net_domain_get_max_buffer_segment_size(ndom) </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00082">82</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga1b0333974657828e5a5db987af42d72a_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga1b0333974657828e5a5db987af42d72a_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga1b0333974657828e5a5db987af42d72a_cgraph" id="d8/d01/group__net__buffer__pool_ga1b0333974657828e5a5db987af42d72a_cgraph">
<area shape="rect" id="node2" href="../../d9/dd2/group__net.html#ga3d66eac325133202ca0143be0717d080" title="m0_net_domain_get_max\l_buffer_segments" alt="" coords="232,5,423,47"/>
<area shape="rect" id="node3" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a01283f6c481bc4a3d0f204e957179d6e" title="M0_ERR" alt="" coords="290,71,365,98"/>
<area shape="rect" id="node4" href="../../d0/d04/group__mutex.html#ga342a63c7734a82930710cafbe895013f" title="m0_mutex_init" alt="" coords="267,122,387,149"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga1b0333974657828e5a5db987af42d72a_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga1b0333974657828e5a5db987af42d72a_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga1b0333974657828e5a5db987af42d72a_icgraph" id="d8/d01/group__net__buffer__pool_ga1b0333974657828e5a5db987af42d72a_icgraph">
<area shape="rect" id="node2" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#ad4ca50eaf4b1cc06d740a78fe91a7ae7" title="sender_init" alt="" coords="283,5,378,32"/>
<area shape="rect" id="node3" href="../../d7/daf/group___s_n_s_c_m.html#ga21cec19aa494a42c7c1227e4489b66b2" title="m0_sns_cm_setup" alt="" coords="259,56,402,83"/>
<area shape="rect" id="node4" href="../../d3/d94/group___d_l_d__bulk__server__fspec__ios__operations.html#ga9bfc314511ba60e341f0740c2c56c9eb" title="m0_ios_create_buffer_pool" alt="" coords="232,107,429,133"/>
<area shape="rect" id="node5" href="../../d7/dfe/buffer__pool__ut_8c.html#acba08c3a3319512a31cf338a9871f1a5" title="test_init" alt="" coords="293,157,368,184"/>
<area shape="rect" id="node6" href="../../d3/d8c/tm__provision__ut_8c.html#aa062adb23a2556f9eb61a768311e5e64" title="test_net_tm_prov" alt="" coords="263,208,399,235"/>
<area shape="rect" id="node7" href="../../db/de9/group__rpc.html#gacf2682f75faa756e5834ce6b7e17d164" title="m0_rpc_net_buffer_pool\l_setup" alt="" coords="241,259,420,301"/>
</map>
</div>

</div>
</div>
<a id="gaa49f3dade06b0e05f6ea7df746aab950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa49f3dade06b0e05f6ea7df746aab950">&#9670;&nbsp;</a></span>m0_net_buffer_pool_invariant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL bool m0_net_buffer_pool_invariant </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks the buffer pool. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00050">50</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_gaa49f3dade06b0e05f6ea7df746aab950_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_gaa49f3dade06b0e05f6ea7df746aab950_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_gaa49f3dade06b0e05f6ea7df746aab950_cgraph" id="d8/d01/group__net__buffer__pool_gaa49f3dade06b0e05f6ea7df746aab950_cgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#ga5891449a008a0d2a5fcad686b2f2e63e" title="m0_net_buffer_pool\l_is_locked" alt="" coords="211,5,361,47"/>
<area shape="rect" id="node3" href="../../d8/d01/group__net__buffer__pool.html#ga1d15c8fbe233ea612aa943c6d4c5d0f0" title="pool_colour_check" alt="" coords="215,71,357,98"/>
<area shape="rect" id="node4" href="../../d8/d01/group__net__buffer__pool.html#gab271958565699ec3b9b3cb533d37a947" title="pool_lru_buffer_check" alt="" coords="204,122,368,149"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_gaa49f3dade06b0e05f6ea7df746aab950_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_gaa49f3dade06b0e05f6ea7df746aab950_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_gaa49f3dade06b0e05f6ea7df746aab950_icgraph" id="d8/d01/group__net__buffer__pool_gaa49f3dade06b0e05f6ea7df746aab950_icgraph">
<area shape="rect" id="node2" href="../../d0/da4/group___c_m.html#gaa8c14adc06d2f27b7c0f5ec2e97ccda5" title="m0_cm_buffer_get" alt="" coords="449,16,591,43"/>
<area shape="rect" id="node3" href="../../d7/daf/group___s_n_s_c_m.html#gaf9a189d26aa2801b1bec336d6610140c" title="m0_sns_cm_buffer_pool\l_provision" alt="" coords="856,280,1035,321"/>
<area shape="rect" id="node4" href="../../d8/d01/group__net__buffer__pool.html#gaf903917ab63aa4d49b3944a4b491992c" title="m0_net_buffer_pool\l_provision" alt="" coords="657,313,808,354"/>
<area shape="rect" id="node5" href="../../d7/dfe/buffer__pool__ut_8c.html#a2b7d733ce26f673ebc8c403b6846767b" title="test_grow" alt="" coords="902,354,989,380"/>
<area shape="rect" id="node6" href="../../d8/d01/group__net__buffer__pool.html#gacee3366ac3ea4c57c35ec88b263a3159" title="buffer_remove" alt="" coords="235,548,352,575"/>
<area shape="rect" id="node7" href="../../d8/d01/group__net__buffer__pool.html#ga6a3e7055ae94f1e50574dc7c8816c284" title="m0_net_buffer_pool_fini" alt="" coords="431,498,609,524"/>
<area shape="rect" id="node8" href="../../d7/dfe/buffer__pool__ut_8c.html#accd2b6e71712d5b3683c70754cdd6722" title="test_fini" alt="" coords="695,472,770,499"/>
<area shape="rect" id="node9" href="../../d8/d01/group__net__buffer__pool.html#ga3bf9b14c32877d0d93dd44c2143b60a3" title="m0_net_buffer_pool\l_prune" alt="" coords="445,584,595,625"/>
<area shape="rect" id="node10" href="../../d7/dfe/buffer__pool__ut_8c.html#a707430924a9feee691f58b02fc0204f2" title="test_prune" alt="" coords="687,620,778,647"/>
<area shape="rect" id="node11" href="../../d8/d01/group__net__buffer__pool.html#gac6bdd9900fc54c802b1e16d44cb6b64f" title="m0_net_buffer_pool_get" alt="" coords="204,92,383,119"/>
<area shape="rect" id="node12" href="../../d7/dfe/buffer__pool__ut_8c.html#a7e397b420ebcaba12c8ae7c0ec57b7a7" title="test_get_put" alt="" coords="469,92,571,119"/>
<area shape="rect" id="node13" href="../../d7/dfe/buffer__pool__ut_8c.html#a056d8fcec335c87e78165d32f4d1567e" title="test_get_put_colour" alt="" coords="445,143,595,170"/>
<area shape="rect" id="node14" href="../../d8/d01/group__net__buffer__pool.html#gacaa1314b4436697faf45f84463ba14f5" title="m0_net_buffer_pool_put" alt="" coords="204,194,383,220"/>
<area shape="rect" id="node15" href="../../d8/d01/group__net__buffer__pool.html#ga687784ed53bf1d4d1d4b7c272106d8f6" title="net_buffer_pool_grow" alt="" coords="439,295,601,322"/>
<area shape="rect" id="node16" href="../../d7/dfe/buffer__pool__ut_8c.html#a4c62e6d9ec5c37525da477e69a74a171" title="test_get_put_multiple" alt="" coords="211,700,375,727"/>
</map>
</div>

</div>
</div>
<a id="ga5891449a008a0d2a5fcad686b2f2e63e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5891449a008a0d2a5fcad686b2f2e63e">&#9670;&nbsp;</a></span>m0_net_buffer_pool_is_locked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL bool m0_net_buffer_pool_is_locked </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check whether buffer pool is locked or not. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00191">191</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga5891449a008a0d2a5fcad686b2f2e63e_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga5891449a008a0d2a5fcad686b2f2e63e_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga5891449a008a0d2a5fcad686b2f2e63e_cgraph" id="d8/d01/group__net__buffer__pool_ga5891449a008a0d2a5fcad686b2f2e63e_cgraph">
<area shape="rect" id="node2" href="../../d0/d04/group__mutex.html#ga0c96633d90ccf7e2ed6ffee75d983975" title="m0_mutex_is_locked" alt="" coords="204,13,364,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga5891449a008a0d2a5fcad686b2f2e63e_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga5891449a008a0d2a5fcad686b2f2e63e_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga5891449a008a0d2a5fcad686b2f2e63e_icgraph" id="d8/d01/group__net__buffer__pool_ga5891449a008a0d2a5fcad686b2f2e63e_icgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#gaa49f3dade06b0e05f6ea7df746aab950" title="m0_net_buffer_pool\l_invariant" alt="" coords="228,5,379,47"/>
<area shape="rect" id="node3" href="../../d0/d50/group__net__pvt.html#ga10b81fec0a61efae5b970c93c8166031" title="m0_net__tm_provision_buf" alt="" coords="204,71,403,98"/>
<area shape="rect" id="node4" href="../../d2/d82/tm__provision_8c.html#a233cb9884376e1f8cee9344fc43ec405" title="tm_provision_recv_q" alt="" coords="451,122,608,149"/>
<area shape="rect" id="node5" href="../../d9/dd2/group__net.html#ga56521d311aec804ccae66e4594719282" title="m0_net_domain_buffer\l_pool_not_empty" alt="" coords="656,140,828,181"/>
</map>
</div>

</div>
</div>
<a id="ga1de02828dec622bfbd4b17cfa87e3115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1de02828dec622bfbd4b17cfa87e3115">&#9670;&nbsp;</a></span>m0_net_buffer_pool_is_not_locked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL bool m0_net_buffer_pool_is_not_locked </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true when buffer pool is not locked. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00197">197</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga1de02828dec622bfbd4b17cfa87e3115_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga1de02828dec622bfbd4b17cfa87e3115_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga1de02828dec622bfbd4b17cfa87e3115_cgraph" id="d8/d01/group__net__buffer__pool_ga1de02828dec622bfbd4b17cfa87e3115_cgraph">
<area shape="rect" id="node2" href="../../d0/d04/group__mutex.html#ga3499d6f495de6815f79e3e1b1477bc8b" title="m0_mutex_is_not_locked" alt="" coords="204,13,392,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga1de02828dec622bfbd4b17cfa87e3115_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga1de02828dec622bfbd4b17cfa87e3115_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga1de02828dec622bfbd4b17cfa87e3115_icgraph" id="d8/d01/group__net__buffer__pool_ga1de02828dec622bfbd4b17cfa87e3115_icgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#ga6a3e7055ae94f1e50574dc7c8816c284" title="m0_net_buffer_pool_fini" alt="" coords="204,5,383,32"/>
<area shape="rect" id="node3" href="../../d0/d50/group__net__pvt.html#ga8ba7ab498de3ba7b1e9818dfa25708d0" title="m0_net__tm_provision\l_recv_q" alt="" coords="208,57,379,98"/>
</map>
</div>

</div>
</div>
<a id="ga3108150c6181b9767449f3b2eb0c0f7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3108150c6181b9767449f3b2eb0c0f7c">&#9670;&nbsp;</a></span>m0_net_buffer_pool_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_net_buffer_pool_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acquires the lock on buffer pool. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00186">186</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga3108150c6181b9767449f3b2eb0c0f7c_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga3108150c6181b9767449f3b2eb0c0f7c_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga3108150c6181b9767449f3b2eb0c0f7c_cgraph" id="d8/d01/group__net__buffer__pool_ga3108150c6181b9767449f3b2eb0c0f7c_cgraph">
<area shape="rect" id="node2" href="../../d0/d04/group__mutex.html#gae26efdb3a765f750c5992041d6ee2336" title="m0_mutex_lock" alt="" coords="239,5,365,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga3108150c6181b9767449f3b2eb0c0f7c_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga3108150c6181b9767449f3b2eb0c0f7c_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga3108150c6181b9767449f3b2eb0c0f7c_icgraph" id="d8/d01/group__net__buffer__pool_ga3108150c6181b9767449f3b2eb0c0f7c_icgraph">
<area shape="rect" id="node2" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#ad4ca50eaf4b1cc06d740a78fe91a7ae7" title="sender_init" alt="" coords="306,5,401,32"/>
<area shape="rect" id="node3" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#afcbd44181c1ea62dbb45b274fe7e76f5" title="test_cp_send_mismatch\l_epoch" alt="" coords="264,57,443,98"/>
<area shape="rect" id="node4" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#adaa2b7376b4bc7d156db0e8ad443eddb" title="test_cp_send_recv_verify" alt="" coords="260,123,447,149"/>
<area shape="rect" id="node5" href="../../d7/daf/group___s_n_s_c_m.html#gaf9a189d26aa2801b1bec336d6610140c" title="m0_sns_cm_buffer_pool\l_provision" alt="" coords="264,174,443,215"/>
<area shape="rect" id="node6" href="../../d7/daf/group___s_n_s_c_m.html#gaf240bbad523eef960d83d64259b49ec0" title="buffer_pool_prune" alt="" coords="284,240,423,267"/>
<area shape="rect" id="node7" href="../../d7/daf/group___s_n_s_c_m.html#ga129054683e81f0834e07ca9cf1af044c" title="m0_sns_cm_buf_wait" alt="" coords="272,291,435,317"/>
<area shape="rect" id="node8" href="../../d7/daf/group___s_n_s_c_m.html#ga618ec79ee3ba6783b0b2298925f4fb95" title="m0_sns_cm_buf_attach" alt="" coords="266,341,441,368"/>
<area shape="rect" id="node9" href="../../d7/daf/group___s_n_s_c_m.html#ga75a8df840377548e4f48c361338ffb89" title="m0_sns_cm_has_space_for" alt="" coords="254,392,453,419"/>
<area shape="rect" id="node10" href="../../d7/daf/group___s_n_s_c_m.html#gabd60cea1eeaac8df2ef0d672a510830e" title="m0_sns_cm_reserve_space" alt="" coords="253,443,453,469"/>
<area shape="rect" id="node11" href="../../d7/daf/group___s_n_s_c_m.html#ga2f7a24ac31fc21fead44f9dfd50386a8" title="m0_sns_cm_cancel_reservation" alt="" coords="239,493,468,520"/>
<area shape="rect" id="node12" href="../../d0/d80/group___c_p.html#ga22d931f00946818998815eb22db7f10d" title="m0_cm_cp_buf_release" alt="" coords="266,544,441,571"/>
<area shape="rect" id="node13" href="../../d9/dc2/group__io__foms.html#ga20ae6ec9dfefec8f5eb40e1f8070ee01" title="net_buffer_acquire" alt="" coords="282,595,425,621"/>
<area shape="rect" id="node14" href="../../d9/dc2/group__io__foms.html#ga97e9ddd75a5855c72136e6ee6ccab612" title="nbuf_release_done" alt="" coords="281,645,426,672"/>
<area shape="rect" id="node15" href="../../d9/dc2/group__io__foms.html#gaa5ab8fd37c2a3b8952066b5ad6a322ac" title="m0_io_fom_cob_rw_fini" alt="" coords="266,696,441,723"/>
<area shape="rect" id="node16" href="../../d3/d94/group___d_l_d__bulk__server__fspec__ios__operations.html#ga9bfc314511ba60e341f0740c2c56c9eb" title="m0_ios_create_buffer_pool" alt="" coords="516,749,713,776"/>
<area shape="rect" id="node17" href="../../db/d53/bulkio__ut_8c.html#a0c0021e0d4d5c63dea4e5c613817a5dd" title="empty_buffers_pool" alt="" coords="278,1051,429,1077"/>
<area shape="rect" id="node18" href="../../db/d53/bulkio__ut_8c.html#a3edf7bbdd80a234d3e94166897a255a4" title="check_write_fom_tick" alt="" coords="533,1076,697,1103"/>
<area shape="rect" id="node19" href="../../db/d53/bulkio__ut_8c.html#ad64f68d8d9cae9a924a039c1a717afde" title="check_read_fom_tick" alt="" coords="535,1140,695,1167"/>
<area shape="rect" id="node20" href="../../db/d53/bulkio__ut_8c.html#a12d8d9eafcfb69d0eec60190f10bcfe8" title="release_one_buffer" alt="" coords="280,1101,427,1128"/>
<area shape="rect" id="node21" href="../../db/d53/bulkio__ut_8c.html#a509b9f4b453461070c655c3196a66f24" title="fill_buffers_pool" alt="" coords="291,1152,416,1179"/>
<area shape="rect" id="node22" href="../../d8/d01/group__net__buffer__pool.html#ga6a3e7055ae94f1e50574dc7c8816c284" title="m0_net_buffer_pool_fini" alt="" coords="264,848,443,875"/>
<area shape="rect" id="node23" href="../../d7/dfe/buffer__pool__ut_8c.html#accd2b6e71712d5b3683c70754cdd6722" title="test_fini" alt="" coords="577,805,652,832"/>
<area shape="rect" id="node24" href="../../d3/d8c/tm__provision__ut_8c.html#aa062adb23a2556f9eb61a768311e5e64" title="test_net_tm_prov" alt="" coords="547,867,683,893"/>
<area shape="rect" id="node25" href="../../db/de9/group__rpc.html#gacf2682f75faa756e5834ce6b7e17d164" title="m0_rpc_net_buffer_pool\l_setup" alt="" coords="525,939,704,981"/>
<area shape="rect" id="node26" href="../../d0/d50/group__net__pvt.html#ga8ba7ab498de3ba7b1e9818dfa25708d0" title="m0_net__tm_provision\l_recv_q" alt="" coords="268,1254,439,1295"/>
<area shape="rect" id="node27" href="../../d7/dfe/buffer__pool__ut_8c.html#acba08c3a3319512a31cf338a9871f1a5" title="test_init" alt="" coords="316,1320,391,1347"/>
<area shape="rect" id="node28" href="../../d7/dfe/buffer__pool__ut_8c.html#a7e397b420ebcaba12c8ae7c0ec57b7a7" title="test_get_put" alt="" coords="302,1371,405,1397"/>
<area shape="rect" id="node29" href="../../d7/dfe/buffer__pool__ut_8c.html#a056d8fcec335c87e78165d32f4d1567e" title="test_get_put_colour" alt="" coords="278,1421,429,1448"/>
<area shape="rect" id="node30" href="../../d7/dfe/buffer__pool__ut_8c.html#a2b7d733ce26f673ebc8c403b6846767b" title="test_grow" alt="" coords="310,1472,397,1499"/>
<area shape="rect" id="node31" href="../../d7/dfe/buffer__pool__ut_8c.html#a707430924a9feee691f58b02fc0204f2" title="test_prune" alt="" coords="308,1523,399,1549"/>
<area shape="rect" id="node32" href="../../d7/dfe/buffer__pool__ut_8c.html#a4c62e6d9ec5c37525da477e69a74a171" title="test_get_put_multiple" alt="" coords="533,1599,697,1625"/>
<area shape="rect" id="node33" href="../../d7/dfe/buffer__pool__ut_8c.html#ac94f759827073e859d915c4077a01439" title="buffers_get_put" alt="" coords="292,1624,415,1651"/>
<area shape="rect" id="node34" href="../../d3/d8c/tm__provision__ut_8c.html#ae12b268ac12266d77cae355410c68136" title="ut_prov_msg_recv_cb" alt="" coords="272,1675,435,1701"/>
<area shape="rect" id="node35" href="../../db/de9/group__rpc.html#ga3ad6cf0ef81c71fa5960ee72f0357563" title="rpc_recv_pool_buffer_put" alt="" coords="261,1725,446,1752"/>
</map>
</div>

</div>
</div>
<a id="gaf903917ab63aa4d49b3944a4b491992c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf903917ab63aa4d49b3944a4b491992c">&#9670;&nbsp;</a></span>m0_net_buffer_pool_provision()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL int m0_net_buffer_pool_provision </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>buf_nr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>It adds the buf_nr buffers in the buffer pool. Suppose to add 10 items to the pool, m0_net_buffer_pool_provision(pool, 10) can be used. </p><dl class="section pre"><dt>Precondition</dt><dd>m0_net_buffer_pool_is_locked(pool) </dd>
<dd>
seg_size &gt; 0 &amp;&amp; seg_nr &gt; 0 &amp;&amp; buf_nr &gt; 0 </dd>
<dd>
pool-&gt;nbp_ndom != NULL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Pool to provision. </td></tr>
    <tr><td class="paramname">buf_nr</td><td>Number of buffers to be added in the pool. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>result number of buffers it managed to allocate. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00125">125</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_gaf903917ab63aa4d49b3944a4b491992c_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_gaf903917ab63aa4d49b3944a4b491992c_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_gaf903917ab63aa4d49b3944a4b491992c_cgraph" id="d8/d01/group__net__buffer__pool_gaf903917ab63aa4d49b3944a4b491992c_cgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#gaa49f3dade06b0e05f6ea7df746aab950" title="m0_net_buffer_pool\l_invariant" alt="" coords="415,5,565,47"/>
<area shape="rect" id="node3" href="../../d8/d01/group__net__buffer__pool.html#ga687784ed53bf1d4d1d4b7c272106d8f6" title="net_buffer_pool_grow" alt="" coords="204,38,367,65"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_gaf903917ab63aa4d49b3944a4b491992c_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_gaf903917ab63aa4d49b3944a4b491992c_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_gaf903917ab63aa4d49b3944a4b491992c_icgraph" id="d8/d01/group__net__buffer__pool_gaf903917ab63aa4d49b3944a4b491992c_icgraph">
<area shape="rect" id="node2" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#ad4ca50eaf4b1cc06d740a78fe91a7ae7" title="sender_init" alt="" coords="255,5,350,32"/>
<area shape="rect" id="node3" href="../../d7/daf/group___s_n_s_c_m.html#gaf9a189d26aa2801b1bec336d6610140c" title="m0_sns_cm_buffer_pool\l_provision" alt="" coords="213,57,392,98"/>
<area shape="rect" id="node4" href="../../d3/d94/group___d_l_d__bulk__server__fspec__ios__operations.html#ga9bfc314511ba60e341f0740c2c56c9eb" title="m0_ios_create_buffer_pool" alt="" coords="204,123,401,149"/>
<area shape="rect" id="node5" href="../../d7/dfe/buffer__pool__ut_8c.html#acba08c3a3319512a31cf338a9871f1a5" title="test_init" alt="" coords="265,173,340,200"/>
<area shape="rect" id="node6" href="../../d7/dfe/buffer__pool__ut_8c.html#a2b7d733ce26f673ebc8c403b6846767b" title="test_grow" alt="" coords="259,224,346,251"/>
<area shape="rect" id="node7" href="../../d3/d8c/tm__provision__ut_8c.html#aa062adb23a2556f9eb61a768311e5e64" title="test_net_tm_prov" alt="" coords="235,275,371,301"/>
<area shape="rect" id="node8" href="../../db/de9/group__rpc.html#gacf2682f75faa756e5834ce6b7e17d164" title="m0_rpc_net_buffer_pool\l_setup" alt="" coords="213,326,392,367"/>
</map>
</div>

</div>
</div>
<a id="ga3bf9b14c32877d0d93dd44c2143b60a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3bf9b14c32877d0d93dd44c2143b60a3">&#9670;&nbsp;</a></span>m0_net_buffer_pool_prune()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL bool m0_net_buffer_pool_prune </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes a buffer from the pool to prune it. </p><dl class="section pre"><dt>Precondition</dt><dd>m0_net_buffer_pool_is_locked(pool) </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00310">310</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga3bf9b14c32877d0d93dd44c2143b60a3_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga3bf9b14c32877d0d93dd44c2143b60a3_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga3bf9b14c32877d0d93dd44c2143b60a3_cgraph" id="d8/d01/group__net__buffer__pool_ga3bf9b14c32877d0d93dd44c2143b60a3_cgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#gaa49f3dade06b0e05f6ea7df746aab950" title="m0_net_buffer_pool\l_invariant" alt="" coords="369,5,520,47"/>
<area shape="rect" id="node3" href="../../d8/d01/group__net__buffer__pool.html#gacee3366ac3ea4c57c35ec88b263a3159" title="buffer_remove" alt="" coords="204,38,321,65"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga3bf9b14c32877d0d93dd44c2143b60a3_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga3bf9b14c32877d0d93dd44c2143b60a3_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga3bf9b14c32877d0d93dd44c2143b60a3_icgraph" id="d8/d01/group__net__buffer__pool_ga3bf9b14c32877d0d93dd44c2143b60a3_icgraph">
<area shape="rect" id="node2" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#afcbd44181c1ea62dbb45b274fe7e76f5" title="test_cp_send_mismatch\l_epoch" alt="" coords="208,5,387,47"/>
<area shape="rect" id="node3" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#adaa2b7376b4bc7d156db0e8ad443eddb" title="test_cp_send_recv_verify" alt="" coords="204,71,391,98"/>
<area shape="rect" id="node4" href="../../d7/daf/group___s_n_s_c_m.html#gaf240bbad523eef960d83d64259b49ec0" title="buffer_pool_prune" alt="" coords="228,122,367,149"/>
<area shape="rect" id="node5" href="../../d7/dfe/buffer__pool__ut_8c.html#a707430924a9feee691f58b02fc0204f2" title="test_prune" alt="" coords="252,173,343,199"/>
</map>
</div>

</div>
</div>
<a id="gacaa1314b4436697faf45f84463ba14f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacaa1314b4436697faf45f84463ba14f5">&#9670;&nbsp;</a></span>m0_net_buffer_pool_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_net_buffer_pool_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>colour</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Puts the buffer back to the pool. If the colour is specfied then the buffer is put at the head of corresponding coloured list and also put at the tail of the global list. </p><dl class="section pre"><dt>Precondition</dt><dd>m0_net_buffer_pool_is_locked(pool) </dd>
<dd>
colour == M0_BUFFER_ANY_COLOUR || colour &lt; pool-&gt;nbp_colours_nr </dd>
<dd>
pool-&gt;nbp_ndom == buf-&gt;nb_dom </dd>
<dd>
(buf-&gt;nb_flags &amp; M0_NET_BUF_REGISTERED) &amp;&amp; !(buf-&gt;nb_flags &amp; M0_NET_BUF_QUEUED) </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00243">243</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_gacaa1314b4436697faf45f84463ba14f5_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_gacaa1314b4436697faf45f84463ba14f5_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_gacaa1314b4436697faf45f84463ba14f5_cgraph" id="d8/d01/group__net__buffer__pool_gacaa1314b4436697faf45f84463ba14f5_cgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#gaa49f3dade06b0e05f6ea7df746aab950" title="m0_net_buffer_pool\l_invariant" alt="" coords="232,5,383,47"/>
<area shape="rect" id="node3" href="../../d8/d01/group__net__buffer__pool.html#ga8b695b0d2fb493f78da0f66f8d4430c0" title="colour_is_valid" alt="" coords="248,71,367,98"/>
<area shape="rect" id="node4" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="263,122,351,149"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_gacaa1314b4436697faf45f84463ba14f5_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_gacaa1314b4436697faf45f84463ba14f5_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_gacaa1314b4436697faf45f84463ba14f5_icgraph" id="d8/d01/group__net__buffer__pool_gacaa1314b4436697faf45f84463ba14f5_icgraph">
<area shape="rect" id="node2" href="../../d0/da4/group___c_m.html#ga206bec9656d7a767323e61aee1dcdd50" title="m0_cm_buffer_put" alt="" coords="253,5,396,32"/>
<area shape="rect" id="node3" href="../../d9/dc2/group__io__foms.html#ga97e9ddd75a5855c72136e6ee6ccab612" title="nbuf_release_done" alt="" coords="252,56,397,83"/>
<area shape="rect" id="node4" href="../../d9/dc2/group__io__foms.html#gaa5ab8fd37c2a3b8952066b5ad6a322ac" title="m0_io_fom_cob_rw_fini" alt="" coords="237,107,412,133"/>
<area shape="rect" id="node5" href="../../db/d53/bulkio__ut_8c.html#a12d8d9eafcfb69d0eec60190f10bcfe8" title="release_one_buffer" alt="" coords="251,259,398,285"/>
<area shape="rect" id="node6" href="../../db/d53/bulkio__ut_8c.html#a3edf7bbdd80a234d3e94166897a255a4" title="check_write_fom_tick" alt="" coords="465,208,629,235"/>
<area shape="rect" id="node7" href="../../db/d53/bulkio__ut_8c.html#ad64f68d8d9cae9a924a039c1a717afde" title="check_read_fom_tick" alt="" coords="467,259,627,285"/>
<area shape="rect" id="node8" href="../../db/d53/bulkio__ut_8c.html#a509b9f4b453461070c655c3196a66f24" title="fill_buffers_pool" alt="" coords="262,208,387,235"/>
<area shape="rect" id="node9" href="../../d8/d01/group__net__buffer__pool.html#ga687784ed53bf1d4d1d4b7c272106d8f6" title="net_buffer_pool_grow" alt="" coords="243,360,406,387"/>
<area shape="rect" id="node10" href="../../d7/dfe/buffer__pool__ut_8c.html#a7e397b420ebcaba12c8ae7c0ec57b7a7" title="test_get_put" alt="" coords="273,411,376,437"/>
<area shape="rect" id="node11" href="../../d7/dfe/buffer__pool__ut_8c.html#a056d8fcec335c87e78165d32f4d1567e" title="test_get_put_colour" alt="" coords="249,461,400,488"/>
<area shape="rect" id="node12" href="../../d7/dfe/buffer__pool__ut_8c.html#ac94f759827073e859d915c4077a01439" title="buffers_get_put" alt="" coords="263,512,386,539"/>
<area shape="rect" id="node13" href="../../d3/d8c/tm__provision__ut_8c.html#ae12b268ac12266d77cae355410c68136" title="ut_prov_msg_recv_cb" alt="" coords="243,563,406,589"/>
<area shape="rect" id="node14" href="../../db/de9/group__rpc.html#ga3ad6cf0ef81c71fa5960ee72f0357563" title="rpc_recv_pool_buffer_put" alt="" coords="232,613,417,640"/>
</map>
</div>

</div>
</div>
<a id="ga98cfb317097d1024cca11a4c5af51b9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga98cfb317097d1024cca11a4c5af51b9c">&#9670;&nbsp;</a></span>m0_net_buffer_pool_unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_net_buffer_pool_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases the lock on buffer pool. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00203">203</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga98cfb317097d1024cca11a4c5af51b9c_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga98cfb317097d1024cca11a4c5af51b9c_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga98cfb317097d1024cca11a4c5af51b9c_cgraph" id="d8/d01/group__net__buffer__pool_ga98cfb317097d1024cca11a4c5af51b9c_cgraph">
<area shape="rect" id="node2" href="../../d0/d04/group__mutex.html#ga18963570792098f5ab3cf3e8ede8046a" title="m0_mutex_unlock" alt="" coords="204,13,347,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga98cfb317097d1024cca11a4c5af51b9c_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga98cfb317097d1024cca11a4c5af51b9c_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga98cfb317097d1024cca11a4c5af51b9c_icgraph" id="d8/d01/group__net__buffer__pool_ga98cfb317097d1024cca11a4c5af51b9c_icgraph">
<area shape="rect" id="node2" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#ad4ca50eaf4b1cc06d740a78fe91a7ae7" title="sender_init" alt="" coords="271,5,366,32"/>
<area shape="rect" id="node3" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#afcbd44181c1ea62dbb45b274fe7e76f5" title="test_cp_send_mismatch\l_epoch" alt="" coords="229,57,408,98"/>
<area shape="rect" id="node4" href="../../da/d87/sns_2cm_2repair_2ut_2net_8c.html#adaa2b7376b4bc7d156db0e8ad443eddb" title="test_cp_send_recv_verify" alt="" coords="225,123,412,149"/>
<area shape="rect" id="node5" href="../../d7/daf/group___s_n_s_c_m.html#gaf9a189d26aa2801b1bec336d6610140c" title="m0_sns_cm_buffer_pool\l_provision" alt="" coords="229,174,408,215"/>
<area shape="rect" id="node6" href="../../d7/daf/group___s_n_s_c_m.html#gaf240bbad523eef960d83d64259b49ec0" title="buffer_pool_prune" alt="" coords="249,240,388,267"/>
<area shape="rect" id="node7" href="../../d7/daf/group___s_n_s_c_m.html#ga129054683e81f0834e07ca9cf1af044c" title="m0_sns_cm_buf_wait" alt="" coords="237,291,400,317"/>
<area shape="rect" id="node8" href="../../d7/daf/group___s_n_s_c_m.html#ga618ec79ee3ba6783b0b2298925f4fb95" title="m0_sns_cm_buf_attach" alt="" coords="231,341,406,368"/>
<area shape="rect" id="node9" href="../../d7/daf/group___s_n_s_c_m.html#ga75a8df840377548e4f48c361338ffb89" title="m0_sns_cm_has_space_for" alt="" coords="219,392,418,419"/>
<area shape="rect" id="node10" href="../../d7/daf/group___s_n_s_c_m.html#gabd60cea1eeaac8df2ef0d672a510830e" title="m0_sns_cm_reserve_space" alt="" coords="219,443,419,469"/>
<area shape="rect" id="node11" href="../../d7/daf/group___s_n_s_c_m.html#ga2f7a24ac31fc21fead44f9dfd50386a8" title="m0_sns_cm_cancel_reservation" alt="" coords="204,493,433,520"/>
<area shape="rect" id="node12" href="../../d0/d80/group___c_p.html#ga22d931f00946818998815eb22db7f10d" title="m0_cm_cp_buf_release" alt="" coords="231,544,406,571"/>
<area shape="rect" id="node13" href="../../d9/dc2/group__io__foms.html#ga20ae6ec9dfefec8f5eb40e1f8070ee01" title="net_buffer_acquire" alt="" coords="247,595,390,621"/>
<area shape="rect" id="node14" href="../../d9/dc2/group__io__foms.html#ga97e9ddd75a5855c72136e6ee6ccab612" title="nbuf_release_done" alt="" coords="246,645,391,672"/>
<area shape="rect" id="node15" href="../../d9/dc2/group__io__foms.html#gaa5ab8fd37c2a3b8952066b5ad6a322ac" title="m0_io_fom_cob_rw_fini" alt="" coords="231,696,406,723"/>
<area shape="rect" id="node16" href="../../d3/d94/group___d_l_d__bulk__server__fspec__ios__operations.html#ga9bfc314511ba60e341f0740c2c56c9eb" title="m0_ios_create_buffer_pool" alt="" coords="481,749,679,776"/>
<area shape="rect" id="node17" href="../../db/d53/bulkio__ut_8c.html#a0c0021e0d4d5c63dea4e5c613817a5dd" title="empty_buffers_pool" alt="" coords="243,1051,394,1077"/>
<area shape="rect" id="node18" href="../../db/d53/bulkio__ut_8c.html#a3edf7bbdd80a234d3e94166897a255a4" title="check_write_fom_tick" alt="" coords="498,1076,662,1103"/>
<area shape="rect" id="node19" href="../../db/d53/bulkio__ut_8c.html#ad64f68d8d9cae9a924a039c1a717afde" title="check_read_fom_tick" alt="" coords="500,1140,660,1167"/>
<area shape="rect" id="node20" href="../../db/d53/bulkio__ut_8c.html#a12d8d9eafcfb69d0eec60190f10bcfe8" title="release_one_buffer" alt="" coords="245,1101,392,1128"/>
<area shape="rect" id="node21" href="../../db/d53/bulkio__ut_8c.html#a509b9f4b453461070c655c3196a66f24" title="fill_buffers_pool" alt="" coords="256,1152,381,1179"/>
<area shape="rect" id="node22" href="../../d8/d01/group__net__buffer__pool.html#ga6a3e7055ae94f1e50574dc7c8816c284" title="m0_net_buffer_pool_fini" alt="" coords="229,848,408,875"/>
<area shape="rect" id="node23" href="../../d7/dfe/buffer__pool__ut_8c.html#accd2b6e71712d5b3683c70754cdd6722" title="test_fini" alt="" coords="543,805,617,832"/>
<area shape="rect" id="node24" href="../../d3/d8c/tm__provision__ut_8c.html#aa062adb23a2556f9eb61a768311e5e64" title="test_net_tm_prov" alt="" coords="512,867,648,893"/>
<area shape="rect" id="node25" href="../../db/de9/group__rpc.html#gacf2682f75faa756e5834ce6b7e17d164" title="m0_rpc_net_buffer_pool\l_setup" alt="" coords="491,939,669,981"/>
<area shape="rect" id="node26" href="../../d5/d16/group__netsock.html#gae0d835e5b33df4f26664af2f5c067f25" title="pk_header_done" alt="" coords="254,1253,383,1280"/>
<area shape="rect" id="node27" href="../../d0/d50/group__net__pvt.html#ga8ba7ab498de3ba7b1e9818dfa25708d0" title="m0_net__tm_provision\l_recv_q" alt="" coords="233,1305,404,1346"/>
<area shape="rect" id="node28" href="../../d7/dfe/buffer__pool__ut_8c.html#acba08c3a3319512a31cf338a9871f1a5" title="test_init" alt="" coords="281,1371,356,1397"/>
<area shape="rect" id="node29" href="../../d7/dfe/buffer__pool__ut_8c.html#a7e397b420ebcaba12c8ae7c0ec57b7a7" title="test_get_put" alt="" coords="267,1421,370,1448"/>
<area shape="rect" id="node30" href="../../d7/dfe/buffer__pool__ut_8c.html#a056d8fcec335c87e78165d32f4d1567e" title="test_get_put_colour" alt="" coords="243,1472,394,1499"/>
<area shape="rect" id="node31" href="../../d7/dfe/buffer__pool__ut_8c.html#a2b7d733ce26f673ebc8c403b6846767b" title="test_grow" alt="" coords="275,1523,362,1549"/>
<area shape="rect" id="node32" href="../../d7/dfe/buffer__pool__ut_8c.html#a707430924a9feee691f58b02fc0204f2" title="test_prune" alt="" coords="273,1573,364,1600"/>
<area shape="rect" id="node33" href="../../d7/dfe/buffer__pool__ut_8c.html#a4c62e6d9ec5c37525da477e69a74a171" title="test_get_put_multiple" alt="" coords="498,1649,662,1676"/>
<area shape="rect" id="node34" href="../../d7/dfe/buffer__pool__ut_8c.html#ac94f759827073e859d915c4077a01439" title="buffers_get_put" alt="" coords="257,1624,380,1651"/>
<area shape="rect" id="node35" href="../../d3/d8c/tm__provision__ut_8c.html#ae12b268ac12266d77cae355410c68136" title="ut_prov_msg_recv_cb" alt="" coords="237,1725,400,1752"/>
<area shape="rect" id="node36" href="../../db/de9/group__rpc.html#ga3ad6cf0ef81c71fa5960ee72f0357563" title="rpc_recv_pool_buffer_put" alt="" coords="226,1776,411,1803"/>
</map>
</div>

</div>
</div>
<a id="ga09a32c80736a89ad4cbe44b192663fb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga09a32c80736a89ad4cbe44b192663fb3">&#9670;&nbsp;</a></span>M0_TL_DEFINE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_TL_DEFINE </td>
          <td>(</td>
          <td class="paramtype">m0_net_pool&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M0_INTERNAL&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gacc0997e38f0166aaa871bb8dec7e5ba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc0997e38f0166aaa871bb8dec7e5ba0">&#9670;&nbsp;</a></span>M0_TL_DESCR_DEFINE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_TL_DESCR_DEFINE </td>
          <td>(</td>
          <td class="paramtype">m0_net_pool&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;net_buffer_pool&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M0_INTERNAL&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">nb_lru&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">nb_magic&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a3eba6d2b37bf147c62a017ff0d327fac">M0_NET_BUFFER_LINK_MAGIC</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a37c0ec0d9212282ff59eac153c3a6bf7">M0_NET_BUFFER_HEAD_MAGIC</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Descriptor for the tlist of buffers. </p>

</div>
</div>
<a id="ga687784ed53bf1d4d1d4b7c272106d8f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga687784ed53bf1d4d1d4b7c272106d8f6">&#9670;&nbsp;</a></span>net_buffer_pool_grow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool net_buffer_pool_grow </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Adds a buffer to the pool to increase the capacity. </p><dl class="section pre"><dt>Precondition</dt><dd>m0_net_buffer_pool_is_locked(pool) </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00270">270</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga687784ed53bf1d4d1d4b7c272106d8f6_cgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga687784ed53bf1d4d1d4b7c272106d8f6_cgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga687784ed53bf1d4d1d4b7c272106d8f6_cgraph" id="d8/d01/group__net__buffer__pool_ga687784ed53bf1d4d1d4b7c272106d8f6_cgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#gaa49f3dade06b0e05f6ea7df746aab950" title="m0_net_buffer_pool\l_invariant" alt="" coords="451,91,601,132"/>
<area shape="rect" id="node3" href="../../d0/d7f/group__vec.html#gae5b49d825f274ec8edc067df5d9dc2ac" title="m0_bufvec_alloc_aligned\l_packed" alt="" coords="216,40,403,82"/>
<area shape="rect" id="node4" href="../../d0/d7f/group__vec.html#gac25d6ad9c927e9c77f990f3f08d00d8e" title="m0__bufvec_dont_dump" alt="" coords="219,106,400,133"/>
<area shape="rect" id="node5" href="../../d9/dd2/group__net.html#ga04de32441cbf499e4b92d9d07ae9bec8" title="m0_net_buffer_register" alt="" coords="223,157,396,184"/>
<area shape="rect" id="node6" href="../../d8/d01/group__net__buffer__pool.html#gacaa1314b4436697faf45f84463ba14f5" title="m0_net_buffer_pool_put" alt="" coords="220,208,399,234"/>
<area shape="rect" id="node7" href="../../d0/d7f/group__vec.html#ga95f9e28738990276e914082ede456ea5" title="m0_bufvec_free_aligned\l_packed" alt="" coords="218,259,401,300"/>
<area shape="rect" id="node8" href="../../d7/ded/group__memory.html#ga0b8533a3024754008602759e71337eb3" title="m0_free" alt="" coords="271,325,347,352"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga687784ed53bf1d4d1d4b7c272106d8f6_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga687784ed53bf1d4d1d4b7c272106d8f6_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga687784ed53bf1d4d1d4b7c272106d8f6_icgraph" id="d8/d01/group__net__buffer__pool_ga687784ed53bf1d4d1d4b7c272106d8f6_icgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#gaf903917ab63aa4d49b3944a4b491992c" title="m0_net_buffer_pool\l_provision" alt="" coords="216,5,367,47"/>
</map>
</div>

</div>
</div>
<a id="ga1d15c8fbe233ea612aa943c6d4c5d0f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1d15c8fbe233ea612aa943c6d4c5d0f0">&#9670;&nbsp;</a></span>pool_colour_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool pool_colour_check </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00068">68</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_ga1d15c8fbe233ea612aa943c6d4c5d0f0_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_ga1d15c8fbe233ea612aa943c6d4c5d0f0_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_ga1d15c8fbe233ea612aa943c6d4c5d0f0_icgraph" id="d8/d01/group__net__buffer__pool_ga1d15c8fbe233ea612aa943c6d4c5d0f0_icgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#gaa49f3dade06b0e05f6ea7df746aab950" title="m0_net_buffer_pool\l_invariant" alt="" coords="196,5,347,47"/>
</map>
</div>

</div>
</div>
<a id="gab271958565699ec3b9b3cb533d37a947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab271958565699ec3b9b3cb533d37a947">&#9670;&nbsp;</a></span>pool_lru_buffer_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool pool_lru_buffer_check </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d83/buffer__pool_8c_source.html#l00075">75</a> of file <a class="el" href="../../d2/d83/buffer__pool_8c_source.html">buffer_pool.c</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d01/group__net__buffer__pool_gab271958565699ec3b9b3cb533d37a947_icgraph.png" border="0" usemap="#d8/d01/group__net__buffer__pool_gab271958565699ec3b9b3cb533d37a947_icgraph" alt=""/></div>
<map name="d8/d01/group__net__buffer__pool_gab271958565699ec3b9b3cb533d37a947_icgraph" id="d8/d01/group__net__buffer__pool_gab271958565699ec3b9b3cb533d37a947_icgraph">
<area shape="rect" id="node2" href="../../d8/d01/group__net__buffer__pool.html#gaa49f3dade06b0e05f6ea7df746aab950" title="m0_net_buffer_pool\l_invariant" alt="" coords="217,5,368,47"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri May 27 2022 00:05:59 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
